# S_UI_DESIGN_GUIDE

> ⚠️ **重要（追記）**: 本プロジェクトは Tailwind を全面撤廃し、**MUI Theme / Design Tokens** に統一する方針です。
> 本ドキュメント中の Tailwind 固有の実装ガイドは **移行対象（deprecated）** です。今後の実装では MUI のトークンや CSS 変数を優先してください。

## 🧱 レイヤー構造（z-index）の指針

アプリケーション全体のUI要素は以下の優先順位に従って配置します。Pageごとの独自定義は避け、このグローバル定義を参照してください。

| レイヤー区分 | レベル | z-index | 主な該当要素 | 解説 |
| :--- | :--- | :--- | :--- | :--- |
| **L1: システム・モーダル** | 最前面 | `z-[200]` | 通報画面、確認ダイアログ、OSアラート | ユーザーの入力を強制的に遮断し、最前面に表示。背景は操作不可。 |
| **L2: ポップアップ／オーバーレイ** | 前面 | `z-[150]` | ハンバーガーメニュー、通知パネル、ドロップダウン | 既存UIの上に重なるが、一時的な要素。外部クリックで閉じる。 |
| **L3: 固定UI** | 中面 | `z-[100]` | トップメニューバー（ヘッダー） | 常に画面上部に固定される主要ナビゲーション。 |
| **L4: ページコンテンツ** | 基本 | `z-[0]` | 画面内の各カード、フォーム、画像など | 通常のページ構成要素。 |

---

## 🎨 表示・操作ルール

### 1. ハンバーガーメニュー (L2)
- **表示レベル**: L2（L3のトップメニューバーよりも前面）。
- **挙動**:
  - メニューアイコンの再クリックでトグル（開閉）。
  - **非操作不可の解消**: 背景にクリックを遮断する透明レイヤー（バックドロップ）を置かず、背後の要素を直接操作可能とする。
  - **オートクローズ**: 背後のコンテンツやヘッダーの他の要素を操作（クリック）した際、自動的にオーバーレイを閉じる。
  - ESCキー押下で閉じる。
- **視覚効果**: 左端からスライドインし、サイドバー部分以外は暗転させない（または極端に薄くし、イベントを背後に透過させる）。

### 2. 通知パネル (L2)
- **表示レベル**: L2。
- **挙動**:
  - 通知アイコンクリックで開閉。
  - 外部クリック（他の画面要素の操作）で自動的に閉じる。

### 3. トップメニューバー (L3)
- **表示レベル**: L3。
- **挙動**: `sticky top-0` で固定。L2展開時も操作を妨げない。

---

## 🛠️ 実装ガイド（Tailwind CSS）
実装時には、ハードコードされた数値ではなく、このガイドに基づいたクラスを使用してください。

- モーダル: `z-[200]`
- オーバーレイ: `z-[150]`
- バックドロップ: `z-[140]`
- ヘッダー: `z-[100]`

## Action & Persistence (操作と保存)

- 編集および保存アクションは画面上部の `TopMenuBar` に集約すること。TopMenuBar の `SAVE` / `EDIT` ボタンが唯一の保存トリガーである。
- 画面下部の `ActionBar` や、コンポーネント単位の保存ボタン、個別の保存スピナーは **廃止 (Deprecated)** とする。これらは UI の一貫性を損ない、ユーザーに混乱を与えるため使用禁止。
- 表示上の副次的なフィードバック（保存成功・失敗の通知）は NotificationContext / Snackbar 等を通じて行い、ブロック単位の保存ステータス表示は行わない。

理由: 全体保存ポリシーに従い、ユーザーがどの変更が保存されるかを一元管理するため。

